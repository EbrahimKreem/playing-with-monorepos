(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{266:function(e,t,a){e.exports=a(439)},435:function(e,t,a){},439:function(e,t,a){"use strict";a.r(t);var n=a(253),r=a(0),o=a.n(r),i=a(66),c=a.n(i),l=a(68),s=a(25),u=a.n(s),m=a(35),d=a(452),p=a(441),g=a(450),b=a(69),f=a(29),h=a(54),E=a(92),v=function(e){var t=e.field;return o.a.createElement(f.a,{name:t},function(e){return o.a.createElement(E.a,{basic:!0,color:"red",pointing:"below",size:"small"},e)})},w=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{field:"email"}),o.a.createElement(d.a.Field,null,o.a.createElement(f.b,{type:"email",name:"email",placeholder:"Email"})))},k=a(78),y=a(448),S=function(e){var t=e.placeholder,a=e.name,n=Object(r.useState)(!1),i=Object(k.a)(n,2),c=i[0],l=i[1],s=function(e){return l(!c)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{field:a||"password"}),o.a.createElement(d.a.Field,null,o.a.createElement(f.b,{type:"password",name:a||"password"},function(e){var a=e.field;return o.a.createElement(y.a,Object.assign({},a,{type:c?"text":"password",icon:o.a.createElement(b.a,{name:c?"eye":"eye slash",circular:!0,link:!0,onClick:s}),placeholder:t||"Password"}))})))},x=a(243),j=a(244),O=a.n(j),I=a(449),F=a(49),q=a(50),P=a.n(q);function R(){var e=Object(F.a)(["\n  mutation($data: AuthFacebookInput!) {\n    authFacebook(data: $data) {\n      token\n      user {\n        _id\n        name\n      }\n    }\n  }\n"]);return R=function(){return e},e}function T(){var e=Object(F.a)(["\n  mutation($data: AuthGoogleInput!) {\n    authGoogle(data: $data) {\n      user {\n        _id\n        name\n      }\n      token\n    }\n  }\n"]);return T=function(){return e},e}function L(){var e=Object(F.a)(["\n  mutation($password: String!, $token: String!) {\n    changePassword(password: $password, token: $token) {\n      user{\n        _id\n        name\n      }\n      token\n    }\n  }\n"]);return L=function(){return e},e}function $(){var e=Object(F.a)(["\n  mutation($data: RegisterInputType!) {\n    register(data: $data) {\n      user {\n        name\n        _id\n      }\n      token\n    }\n  }\n"]);return $=function(){return e},e}function N(){var e=Object(F.a)(["\n  mutation($data: LoginInputType!) {\n    login(data: $data) {\n      user {\n        _id\n        name\n      }\n      token\n    }\n  }\n"]);return N=function(){return e},e}function z(){var e=Object(F.a)(["\n  mutation($email: String!) {\n    forgotPassword(email: $email)\n  }\n"]);return z=function(){return e},e}var C=P()(z()),A=P()(N()),G=P()($()),V=P()(L()),_=P()(T()),Q=P()(R());function U(){var e=Object(F.a)(["\n  {\n    me {\n      _id\n      name\n    }\n  }\n"]);return U=function(){return e},e}var W=P()(U()),B=function(e){var t=e.showUserName,a=e.validationSchema,n=e.initialValues,r=e.onSubmit,i=e.showForgotPasswordLink,c=void 0!==i&&i,l=e.path,s=void 0===l?"Register":l,E=e.history,k=Object(I.a)(_),y=Object(I.a)(Q),j=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.profileObj,n=t.googleId,e.prev=1,e.next=4,k({variables:{data:{name:a.name,googleId:n}},update:function(e,t){var a=t.data;e.writeQuery({query:W,data:{me:a.authGoogle.user}})}});case 4:r=e.sent,o=r.data,localStorage.setItem("token",o.authGoogle.token),E.push("/secret"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.userID,e.prev=1,e.next=4,y({variables:{data:{name:a,facebookId:n}},update:function(e,t){var a=t.data;e.writeQuery({query:W,data:{me:a.authFacebook.user}})}});case 4:r=e.sent,o=r.data,localStorage.setItem("token",o.authFacebook.token),E.push("/secret"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(f.c,{initialValues:n,validationSchema:a,onSubmit:r},function(e){return o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},t?o.a.createElement(o.a.Fragment,null,o.a.createElement(v,{field:"name"}),o.a.createElement(d.a.Field,null,o.a.createElement(f.b,{type:"text",name:"name",placeholder:"Username"}))):null,o.a.createElement(w,null),o.a.createElement(S,null),c?o.a.createElement(h.b,{to:"/forgot-password",style:{float:"right",paddingTop:9}},"Forgot Password?"):null,o.a.createElement(p.a,{type:"submit",basic:!0},"Submit"),o.a.createElement(g.a,{horizontal:!0},o.a.createElement("p",null,o.a.createElement("em",null,"OR"))),o.a.createElement(x.GoogleLogin,{clientId:"750525016321-hs6um0d2o34tksfeg9da78da501fto25.apps.googleusercontent.com",onSuccess:j,onFailure:j,render:function(e){return o.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"ui google plus labeled icon button"},o.a.createElement(b.a,{name:"google"})," ",s," With Google")}}),o.a.createElement(O.a,{appId:"351814088793425",autoLoad:!1,fields:"name,email,picture",callback:F,render:function(e){return o.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"ui facebook right floated labeled icon button"},o.a.createElement(b.a,{name:"facebook f"})," ",s," With Facebook")}}))})},J=a(27),D=a(456),M=a(457),H=J.object().shape({email:J.string().email("Invalid email").required("Required"),password:J.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),K=function(e){var t=Object(I.a)(A);Object(r.useEffect)(function(){localStorage.getItem("token")&&e.history.push("/secret")},[]);var a=function(){var a=Object(m.a)(u.a.mark(function a(n,r){var o,i,c,l;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t({variables:{data:n},update:function(e,t){var a=t.data;e.writeQuery({query:W,data:{me:a.register.user}})}});case 3:o=a.sent,i=o.data,localStorage.setItem("token",i.login.token),e.history.push("/secret"),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(0),c=a.t0.message.split(":")[1],l=c.toLowerCase().includes("email"),r.setFieldError(l?"email":"password",c),r.setSubmitting(!1);case 15:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement("div",{className:"frm"},o.a.createElement(D.a,{stacked:!0},o.a.createElement(g.a,{horizontal:!0},o.a.createElement(M.a,null,o.a.createElement("em",null,"Login"))),o.a.createElement(B,Object.assign({showUserName:!1,initialValues:{email:"",password:""},validationSchema:H,onSubmit:a,showForgotPasswordLink:!0},e,{path:"Login"}))))},X=J.object().shape({name:J.string().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:J.string().email("Invalid email").required("Required"),password:J.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),Y=function(e){var t=Object(I.a)(G);Object(r.useEffect)(function(){localStorage.getItem("token")&&e.history.push("/secret")},[]);var a=function(){var a=Object(m.a)(u.a.mark(function a(n,r){var o,i;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t({variables:{data:n},update:function(e,t){var a=t.data;e.writeQuery({query:W,data:{me:a.register.user}})}});case 3:o=a.sent,i=o.data,localStorage.setItem("token",i.register.token),e.history.push("/secret"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),r.setFieldError("email","Email is in use please try another one"),r.setSubmitting(!1);case 13:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement("div",{className:"frm"},o.a.createElement(D.a,{stacked:!0},o.a.createElement(g.a,{horizontal:!0},o.a.createElement(M.a,null,o.a.createElement("em",null,"Register"))),o.a.createElement(B,Object.assign({showUserName:!0,initialValues:{name:"",email:"",password:""},validationSchema:X,onSubmit:a},e))))},Z=a(453),ee=a(451),te=function(e){Object(r.useEffect)(function(){localStorage.getItem("token")||e.history.push("/register")},[]);var t=Object(Z.a)(W),a=t.data,n=t.loading;return n?o.a.createElement(ee.a,{active:n,inline:"centered",size:"large",style:{marginTop:200}}):o.a.createElement("div",null,o.a.createElement("div",{style:{maxWidth:600,margin:"100px auto"}},o.a.createElement(D.a,null,o.a.createElement(M.a,{textAlign:"center"},"Wellcome ",a.me.name," this is your secret page :)"))))},ae=a(454),ne=function(e){return o.a.createElement(D.a,null,o.a.createElement(ae.a,{secondary:!0},o.a.createElement(ae.a.Menu,{position:"right"},localStorage.getItem("token")?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{color:"red",inverted:!0,onClick:function(){localStorage.removeItem("token"),e.history.push("/register")}},"Logout")):o.a.createElement(o.a.Fragment,null,o.a.createElement(ae.a.Item,{as:h.b,to:"/login"},"Login"),o.a.createElement(ae.a.Item,{as:h.b,to:"/register"},"Register")))))},re=a(458),oe=function(e){var t=e.content,a=e.show,n=e.close;return o.a.createElement(re.a,{onClose:n,open:a},o.a.createElement(D.a,{raised:!0,style:{left:"80%",position:"fixed",top:"10%",marginRight:"20px",zIndex:1e3}},o.a.createElement(b.a,{name:"close",circular:!0,link:!0,style:{float:"right"},onClick:n}),o.a.createElement("p",{style:{color:"#576366"}},t)))},ie=J.object().shape({email:J.string().email("Invalid email").required("Required")}),ce=function(e){var t=Object(I.a)(C),a=Object(r.useState)(!1),n=Object(k.a)(a,2),i=n[0],c=n[1],l=function(){var e=Object(m.a)(u.a.mark(function e(a,n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{email:a.email}});case 3:n.setSubmitting(!1),c(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n.setFieldError("email","No account with this email address exists"),n.setSubmitting(!1);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}();return o.a.createElement(f.c,{initialValues:{email:""},validationSchema:ie,onSubmit:l},function(e){return o.a.createElement("div",{className:"frm"},i?o.a.createElement(oe,{show:i,close:function(){return c(!1)},content:"Alright! Instructions to reset your password have been emailed to you. Please check your email."}):null,o.a.createElement(D.a,{stacked:!0},o.a.createElement("div",{style:{padding:".6em"}},o.a.createElement(M.a,null,"Reset Password"),o.a.createElement("p",{style:{color:"#576366"}},"Enter your email address and we\u2019ll send you an email with instructions to reset your password."),o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},o.a.createElement(w,null),o.a.createElement(p.a,{type:"submit",basic:!0},"Submit")))))})},le=function(){return o.a.createElement("div",{style:{marginTop:150}},o.a.createElement(M.a,{textAlign:"center",size:"huge"},"404"),o.a.createElement(M.a,{textAlign:"center",size:"small",style:{marginTop:"-.5rem",color:"#576366"}},"Page Not Found"))},se=J.object().shape({password:J.string().min(8,"Too Short!").max(30,"Too Long!").required("Required"),confirmPassword:J.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),ue=function(e){var t=Object(I.a)(V),a=Object(r.useState)(!1),n=Object(k.a)(a,2),i=n[0],c=n[1],l=function(){var a=Object(m.a)(u.a.mark(function a(n,r){var o,i;return u.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.password===n.confirmPassword){a.next=3;break}return r.setSubmitting(!1),a.abrupt("return",r.setFieldError("confirmPassword","Password did not match"));case 3:return a.prev=3,a.next=6,t({variables:{password:n.password,token:e.match.params.token}});case 6:o=a.sent,i=o.data,localStorage.setItem("token",i.changePassword.token),e.history.push("/secret"),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(3),c(!0),r.setSubmitting(!1);case 16:case"end":return a.stop()}},a,null,[[3,12]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement(f.c,{initialValues:{password:"",confirmPassword:""},validationSchema:se,onSubmit:l},function(e){return o.a.createElement("div",{className:"frm"},i?o.a.createElement(oe,{show:i,close:function(){return c(!1)},content:"Password reset token is invalid or has expired"}):null,o.a.createElement(D.a,null,o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},o.a.createElement(g.a,{horizontal:!0},o.a.createElement(M.a,null,o.a.createElement("em",null,"Reset Password"))),o.a.createElement(S,null),o.a.createElement(S,{placeholder:"Confirm Password",name:"confirmPassword"}),o.a.createElement(p.a,{type:"submit",basic:!0},"Submit"))))})},me=function(){return o.a.createElement("div",null,o.a.createElement(l.b,{component:ne}),o.a.createElement(l.d,null,o.a.createElement(l.a,{exact:!0,from:"/",to:"/register"}),o.a.createElement(l.b,{exact:!0,path:"/login",component:K}),o.a.createElement(l.b,{exact:!0,path:"/register",component:Y}),o.a.createElement(l.b,{exact:!0,path:"/secret",component:te}),o.a.createElement(l.b,{exact:!0,path:"/forgot-password",component:ce}),o.a.createElement(l.b,{exact:!0,path:"/reset/:token",component:ue}),o.a.createElement(l.b,{component:le})))},de=(a(435),a(130)),pe=a(134),ge=a(251),be=a(250),fe=a(254),he=Object(ge.a)({uri:"http://localhost:4000/graphql"}),Ee=Object(be.a)(function(e,t){var a=t.headers,r=localStorage.getItem("token");return{headers:Object(n.a)({},a,{authorization:r?"Bearer ".concat(r):""})}}),ve=new pe.a({link:Ee.concat(he),cache:new fe.a});c.a.render(o.a.createElement(de.a,{client:ve},o.a.createElement(h.a,null,o.a.createElement(me,null))),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.959986de.chunk.js.map