(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{260:function(e,t,a){e.exports=a(433)},429:function(e,t,a){},433:function(e,t,a){"use strict";a.r(t);var n=a(246),r=a(0),o=a.n(r),i=a(62),l=a.n(i),c=a(64),s=a(32),m=a.n(s),u=a(50),d=a(446),p=a(435),E=a(29),g=a(51),b=a(90),h=function(e){var t=e.field;return o.a.createElement(E.a,{name:t},function(e){return o.a.createElement(b.a,{basic:!0,color:"red",pointing:"below",size:"small"},e)})},f=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,{field:"email"}),o.a.createElement(d.a.Field,null,o.a.createElement(E.b,{type:"email",name:"email",placeholder:"Email"})))},w=a(76),v=a(442),S=a(67),k=function(e){var t=e.placeholder,a=e.name,n=Object(r.useState)(!1),i=Object(w.a)(n,2),l=i[0],c=i[1],s=function(e){return c(!l)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(h,{field:a||"password"}),o.a.createElement(d.a.Field,null,o.a.createElement(E.b,{type:"password",name:a||"password"},function(e){var a=e.field;return o.a.createElement(v.a,Object.assign({},a,{type:l?"text":"password",icon:o.a.createElement(S.a,{name:l?"eye":"eye slash",circular:!0,link:!0,onClick:s}),placeholder:t||"Password"}))})))},y=function(e){var t=e.showUserName,a=e.validationSchema,n=e.initialValues,r=e.onSubmit,i=e.showForgotPasswordLink,l=void 0!==i&&i;return o.a.createElement(E.c,{initialValues:n,validationSchema:a,onSubmit:r},function(e){return o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},t?o.a.createElement(o.a.Fragment,null,o.a.createElement(h,{field:"name"}),o.a.createElement(d.a.Field,null,o.a.createElement(E.b,{type:"text",name:"name",placeholder:"Username"}))):null,o.a.createElement(f,null),o.a.createElement(k,null),l?o.a.createElement(g.b,{to:"/forgot-password",style:{float:"right",paddingTop:9}},"Forgot Password?"):null,o.a.createElement(p.a,{type:"submit",basic:!0},"Submit"))})},x=a(443),j=a(27),O=a(450),P=a(444),T=a(451),q=a(65),I=a(66),F=a.n(I);function R(){var e=Object(q.a)(["\n  mutation($data: UpdateUserInputType!, $token: String) {\n    updatePassword(data: $data, token: $token) {\n      id\n      name\n      email\n      resetPasswordToken\n      resetPasswordExpires\n    }\n  }\n"]);return R=function(){return e},e}function L(){var e=Object(q.a)(["\n  mutation($data: RegisterInputType!) {\n    register(data: $data) {\n      user {\n        name\n      }\n      token\n    }\n  }\n"]);return L=function(){return e},e}function $(){var e=Object(q.a)(["\n  mutation($data: LoginInputType!) {\n    login(data: $data) {\n      user {\n        name\n      }\n      token\n    }\n  }\n"]);return $=function(){return e},e}function z(){var e=Object(q.a)(["\n  mutation($email: String!) {\n    forgotPassword(email: $email)\n  }\n"]);return z=function(){return e},e}var N=F()(z()),C=F()($()),U=F()(L()),V=F()(R()),A=j.object().shape({email:j.string().email("Invalid email").required("Required"),password:j.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),B=function(e){var t=Object(x.a)(C),a=function(){var a=Object(u.a)(m.a.mark(function a(n,r){var o,i,l,c;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t({variables:{data:n}});case 3:o=a.sent,i=o.data,localStorage.setItem("token",i.login.token),e.history.push("/secret"),a.next=15;break;case 9:a.prev=9,a.t0=a.catch(0),l=a.t0.message.split(":")[1],c=l.toLowerCase().includes("email"),r.setFieldError(c?"email":"password",l),r.setSubmitting(!1);case 15:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement("div",{className:"frm"},o.a.createElement(O.a,{stacked:!0},o.a.createElement(P.a,{horizontal:!0},o.a.createElement(T.a,null,o.a.createElement("em",null,"Login"))),o.a.createElement(y,{showUserName:!1,initialValues:{email:"",password:""},validationSchema:A,onSubmit:a,showForgotPasswordLink:!0})))},J=j.object().shape({name:j.string().min(2,"Too Short!").max(20,"Too Long!").required("Required"),email:j.string().email("Invalid email").required("Required"),password:j.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),W=function(e){var t=Object(x.a)(U),a=function(){var a=Object(u.a)(m.a.mark(function a(n,r){var o,i;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t({variables:{data:n}});case 3:o=a.sent,i=o.data,localStorage.setItem("token",i.register.token),e.history.push("/secret"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),r.setFieldError("email","Email is in use please try another one"),r.setSubmitting(!1);case 13:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement("div",{className:"frm"},o.a.createElement(O.a,{stacked:!0},o.a.createElement(P.a,{horizontal:!0},o.a.createElement(T.a,null,o.a.createElement("em",null,"Register"))),o.a.createElement(y,{showUserName:!0,initialValues:{name:"",email:"",password:""},validationSchema:J,onSubmit:a})))},M=a(447),D=a(445);function G(){var e=Object(q.a)(["\n  {\n    me {\n      name\n    }\n  }\n"]);return G=function(){return e},e}var H=F()(G()),K=function(e){Object(r.useEffect)(function(){localStorage.getItem("token")||e.history.push("/register")},[]);var t=Object(M.a)(H),a=t.data,n=t.loading;return n?o.a.createElement(D.a,{active:n,inline:"centered",size:"large",style:{marginTop:200}}):o.a.createElement("div",null,o.a.createElement("div",{style:{maxWidth:600,margin:"100px auto"}},o.a.createElement(O.a,null,o.a.createElement(T.a,{textAlign:"center"},"Wellcome ",a.me.name," this is your secret page :)"))))},Q=a(448),X=function(e){return o.a.createElement(O.a,null,o.a.createElement(Q.a,{secondary:!0},o.a.createElement(Q.a.Menu,{position:"right"},localStorage.getItem("token")?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{color:"red",inverted:!0,onClick:function(){localStorage.removeItem("token"),e.history.push("/register")}},"Logout")):o.a.createElement(o.a.Fragment,null,o.a.createElement(Q.a.Item,{as:g.b,to:"/login"},"Login"),o.a.createElement(Q.a.Item,{as:g.b,to:"/register"},"Register")))))},Y=a(452),Z=function(e){var t=e.content,a=e.show,n=e.close;return o.a.createElement(Y.a,{onClose:n,open:a},o.a.createElement(O.a,{raised:!0,style:{left:"80%",position:"fixed",top:"10%",marginRight:"20px",zIndex:1e3}},o.a.createElement(S.a,{name:"close",circular:!0,link:!0,style:{float:"right"},onClick:n}),o.a.createElement("p",{style:{color:"#576366"}},t)))},_=j.object().shape({email:j.string().email("Invalid email").required("Required")}),ee=function(e){var t=Object(x.a)(N),a=Object(r.useState)(!1),n=Object(w.a)(a,2),i=n[0],l=n[1],c=function(){var e=Object(u.a)(m.a.mark(function e(a,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{email:a.email}});case 3:n.setSubmitting(!1),l(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n.setFieldError("email","No account with this email address exists"),n.setSubmitting(!1);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}();return o.a.createElement(E.c,{initialValues:{email:""},validationSchema:_,onSubmit:c},function(e){return o.a.createElement("div",{className:"frm"},i?o.a.createElement(Z,{show:i,close:function(){return l(!1)},content:"Alright! Instructions to reset your password have been emailed to you. Please check your email."}):null,o.a.createElement(O.a,{stacked:!0},o.a.createElement("div",{style:{padding:".6em"}},o.a.createElement(T.a,null,"Reset Password"),o.a.createElement("p",{style:{color:"#576366"}},"Enter your email address and we\u2019ll send you an email with instructions to reset your password."),o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},o.a.createElement(f,null),o.a.createElement(p.a,{type:"submit",basic:!0},"Submit")))))})},te=j.object().shape({password:j.string().min(8,"Too Short!").max(30,"Too Long!").required("Required"),confirmPassword:j.string().min(8,"Too Short!").max(30,"Too Long!").required("Required")}),ae=function(e){var t=Object(x.a)(V),a=Object(r.useState)(!1),n=Object(w.a)(a,2),i=n[0],l=n[1],c=function(){var a=Object(u.a)(m.a.mark(function a(n,r){var o;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n.password===n.confirmPassword){a.next=3;break}return r.setSubmitting(!1),a.abrupt("return",r.setFieldError("confirmPassword","Password did not match"));case 3:return o={password:n.password,resetPasswordToken:"",resetPasswordExpires:0},a.prev=4,a.next=7,t({variables:{data:o,token:e.match.params.token}});case 7:e.history.push("/login"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(4),l(!0),r.setSubmitting(!1);case 14:case"end":return a.stop()}},a,null,[[4,10]])}));return function(e,t){return a.apply(this,arguments)}}();return o.a.createElement(E.c,{initialValues:{password:"",confirmPassword:""},validationSchema:te,onSubmit:c},function(e){return o.a.createElement("div",{className:"frm"},i?o.a.createElement(Z,{show:i,close:function(){return l(!1)},content:"Password reset token is invalid or has expired"}):null,o.a.createElement(O.a,null,o.a.createElement(d.a,{onSubmit:e.handleSubmit,loading:e.isSubmitting},o.a.createElement(P.a,{horizontal:!0},o.a.createElement(T.a,null,o.a.createElement("em",null,"Reset Password"))),o.a.createElement(k,null),o.a.createElement(k,{placeholder:"Confirm Password",name:"confirmPassword"}),o.a.createElement(p.a,{type:"submit",basic:!0},"Submit"))))})},ne=function(){return o.a.createElement("div",{style:{marginTop:150}},o.a.createElement(T.a,{textAlign:"center",size:"huge"},"404"),o.a.createElement(T.a,{textAlign:"center",size:"small",style:{marginTop:"-.5rem",color:"#576366"}},"Page Not Found"))},re=function(){return o.a.createElement("div",null,o.a.createElement(c.b,{component:X}),o.a.createElement(c.d,null,o.a.createElement(c.a,{exact:!0,from:"/",to:"/register"}),o.a.createElement(c.b,{exact:!0,path:"/login",component:B}),o.a.createElement(c.b,{exact:!0,path:"/register",component:W}),o.a.createElement(c.b,{exact:!0,path:"/secret",component:K}),o.a.createElement(c.b,{exact:!0,path:"/forgot-password",component:ee}),o.a.createElement(c.b,{exact:!0,path:"/reset/:token",component:ae}),o.a.createElement(c.b,{component:ne})))},oe=(a(429),a(128)),ie=a(129),le=a(247),ce=a(244),se=a(248),me=Object(le.a)({uri:"http://localhost:4000/graphql"}),ue=Object(ce.a)(function(e,t){var a=t.headers,r=localStorage.getItem("token");return{headers:Object(n.a)({},a,{authorization:r?"Bearer ".concat(r):""})}}),de=new ie.a({link:ue.concat(me),cache:new se.a});l.a.render(o.a.createElement(oe.a,{client:de},o.a.createElement(g.a,null,o.a.createElement(re,null))),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.47962383.chunk.js.map